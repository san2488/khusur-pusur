<p id="notice"><%= notice %></p>

  <h2><%= @post.title %></h2>
<p>
  <%= @post.content %>
</p>
<span class="category">
  #<%= @post.category.name %>
</span>
        <%= render :partial => "votes/form", :locals => {:obj => @post, :url => post_votes_path(:voteable_type => "post", :post_id => @post.id)} %>
<h2>Comments</h2>
<% @post.comments.each do |comment| %>
    <p>
      <%= comment.user.name.capitalize %> says: <%= comment.content %>
      <% if @current_user && (comment.user_id == @current_user.id || @current_user.is_admin)     %>
          | <%= link_to 'Edit', comment_path(comment)  %>
          | <%= link_to 'Delete', post_comment_path(@post,comment), :confirm => 'Are you sure?', :method=>:delete   %>
      <%end%>
      <span class="vote">
        <!--http://stackoverflow.com/questions/4402556/rails-confused-about-syntax-for-passing-locals-to-partials-->
        <%= render :partial => "votes/form", :locals => {:obj => comment, :url => comment_votes_path(:voteable_type => "comment", :comment_id => comment.id)} %>
      </span>
    </p>
<% end %>
<h2>Add a comment:</h2>
<%= form_for([@post, @post.comments.build]) do |f| %>
    <div class="field">
      <%= f.label :content %>
      <br/>
      <%= f.text_area :content, :cols => '30', :rows => '2' %>
    </div>
    <div class="actions">
      <%= f.submit %>
    </div>
<% end %>
<% if @is_own_post %> <%= link_to 'Edit', edit_post_path(@post) %> |
<% end %>
<%= link_to 'Back', posts_path %>
